document.addEventListener("DOMContentLoaded",(()=>{const t=document.getElementById("csvFile"),e=document.getElementById("extraParams"),n=document.getElementById("filterPlan"),i=document.getElementById("resultsBody"),o=["Service","Utility ID","Utility","Account Type","State","Plan Code"];async function a(){const a=t.files[0];if(!a)return;const d=n.value.trim(),c=(await a.text()).trim().split("\n").map((t=>t.split(","))),s=c.shift(),l=new URLSearchParams(e.value.trim()),r=o.reduce(((t,e)=>(t[e]=s.indexOf(e),t)),{});i.innerHTML="";for(const t of c){const e=t[r.Service]||"",n=t[r["Utility ID"]]||"",o=t[r.Utility]||"",a=t[r["Account Type"]]||"",c=(t[r.State]||"").toLowerCase(),s=t[r["Plan Code"]]||"";if(d&&s!==d)continue;const m=new URLSearchParams;"E"===e?(m.set("utilityid",n),m.set("utilityname",o),m.set("utilityidG",""),m.set("utilitynameG","")):"G"===e&&(m.set("utilityid",""),m.set("utilityname",""),m.set("utilityidG",n),m.set("utilitynameG",o)),m.set("ctype",a),m.set("utility-state",c),m.set("productNum",s);for(const[t,e]of l)m.set(t,e);const p=`https://www.clearviewenergy.com/enrollment/?${m}`,u=document.createElement("tr"),y=document.createElement("td");y.className="px-6 py-4 whitespace-nowrap text-xs text-gray-900",y.textContent=s,u.appendChild(y);const x=document.createElement("td");x.className="px-6 py-4 whitespace-nowrap text-xs text-gray-900",x.textContent=p,u.appendChild(x);const C=document.createElement("td");C.className="px-6 py-4 whitespace-nowrap text-xs font-medium flex items-center";const h=document.createElement("a");h.href=p,h.target="_blank",h.rel="noopener",h.className="text-indigo-600 hover:text-indigo-900",h.textContent="View",C.appendChild(h);const w=document.createElement("button");w.type="button",w.className="ml-4 px-3 py-1 bg-indigo-500 text-white rounded shadow-sm hover:bg-indigo-600",w.textContent="Copy",w.addEventListener("click",(()=>{if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(p).then((()=>{w.textContent="Copied",setTimeout((()=>{w.textContent="Copy"}),2e3)}));else{const t=document.createElement("textarea");t.value=p,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),w.textContent="Copied",setTimeout((()=>{w.textContent="Copy"}),2e3)}})),C.appendChild(w),u.appendChild(C),i.appendChild(u)}}t.addEventListener("change",a),n.addEventListener("input",a)}));
//# sourceMappingURL=scripts.js.map